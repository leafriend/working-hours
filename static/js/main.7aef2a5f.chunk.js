(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,n){e.exports=n(16)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),i=n(6),c=n.n(i),l=(n(13),n(1)),s=(n(14),n(15),n(4)),u=n(2),h=n(3);function d(e){return e<10?"0".concat(e):e.toString()}function f(e){var t="-"===e.charAt(0)?-1:1,n=(t<0?e.substring(1):e).split(":").map(function(e){return parseInt(e,10)}),a=Object(l.a)(n,2);return t*(60*a[0]+a[1])}function v(e){var t=e<0?"-":"",n=Math.abs(e),a=Math.floor(n/60),r=n-60*a;return"".concat(t).concat(d(a),":").concat(d(r))}!function(e){e.WORK="WORK",e.FULL="FULL",e.HALF="HALF"}(a||(a={}));var g=function(){function e(t,n){Object(u.a)(this,e),this.balanceHolder=n,this.date=void 0,this.leaveType=void 0,this.startedAt=void 0,this.finishedAt=void 0,this.date=t.date,this.leaveType=t.leaveType,this.startedAt=t.startedAt,this.finishedAt=t.finishedAt}return Object(h.a)(e,[{key:"working",get:function(){var e=this;if(void 0!==this.startedAt&&void 0!==this.finishedAt){var t=f(this.startedAt),n=f(this.finishedAt)-t;return v(e.leaveType!==a.WORK&&n<270?n-0:e.leaveType!==a.WORK&&n<540?n-30:n<810?n-60:n-90)}}},{key:"overtime",get:function(){var e=this.working;if(void 0!==e){var t=this.leaveType===a.HALF?4:8;return v(f(e)-60*t)}}},{key:"balance",get:function(){var e=this.overtime;return void 0===e?this.balanceHolder.balance:v(f(this.balanceHolder.balance)+f(e))}}]),e}();function m(e){if(null===e)return null;var t=e.date,n=e.leaveType,r=e.startedAt,o=e.finishedAt;return n===a.WORK&&void 0===r&&void 0===o?null:{date:t,leaveType:n,startedAt:r,finishedAt:o}}var p=function(e){var t=e.log,n=new Date(t.date),r=n.getDay(),i=e.holidays.indexOf(t.date)>=0,c=0===r,l=6===r,u=new Date,h="".concat(u.getFullYear(),"-").concat(d(u.getMonth()+1),"-").concat(d(u.getDate()))===t.date,f=i||c||l,v=t.leaveType===a.FULL;function g(n){var a=Object(s.a)({},t,n);e.onLogChange(a)}return o.a.createElement("tr",{className:[i?"holiday":c?"sunday":l?"saturday":"",h?"today":""].join(" ").replace(/ +/g," ").trim()},o.a.createElement("td",{className:"date"},n.getDate()),o.a.createElement("td",null,o.a.createElement("select",{disabled:f,value:t.leaveType,onChange:function(e){return g({leaveType:e.target.value})}},o.a.createElement("option",{value:a.WORK},"Work"),o.a.createElement("option",{value:a.FULL},"Full"),o.a.createElement("option",{value:a.HALF},"Half"))),o.a.createElement("td",{className:"time"},o.a.createElement("input",{disabled:f,readOnly:!f&&v,type:"time",value:t.startedAt||"",onChange:function(e){return g({startedAt:e.target.value||void 0})}})),o.a.createElement("td",{className:"time"},o.a.createElement("input",{disabled:f,readOnly:!f&&(v||""===t.startedAt),type:"time",value:t.finishedAt||"",onChange:function(e){return g({finishedAt:e.target.value||void 0})}})),o.a.createElement("td",{className:"time"},t.working||"--:--"),o.a.createElement("td",{className:"time"},t.balance))},y=function(e){var t=e.logs.map(function(t,n){return o.a.createElement(p,{key:n,holidays:e.holidays,log:t,onLogChange:function(t){return e.onLogsChange(n,t)}})});return o.a.createElement("article",null,o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"date"},"Date"),o.a.createElement("th",null,"Leave"),o.a.createElement("th",{className:"time"},"Started"),o.a.createElement("th",{className:"time"},"Finished"),o.a.createElement("th",{className:"time"},"Working"),o.a.createElement("th",{className:"time"},"Balance"))),o.a.createElement("tbody",null,t)))},w=function(e){return o.a.createElement("header",null,"HCWH: ",e.yearMonth)},b="logsSet",E="2019-05",A=["2019-05-01","2019-05-06"],O=new(function(){function e(){var t=this;Object(u.a)(this,e),this.hash={};var n=localStorage.getItem(b);null===n?localStorage.setItem(b,"{}"):this.hash=JSON.parse(n),Object.entries(this.hash).forEach(function(e){var n=Object(l.a)(e,2),a=n[0],r=n[1];t.hash[a]=r.map(function(e,t){return e&&!e.date?Object(s.a)({date:"".concat(a,"-").concat(d(t+1))},e):e})})}return Object(h.a)(e,[{key:"getLogSources",value:function(e){if(e in this.hash)return this.hash[e];var t=e.split("-").map(function(e){return parseInt(e)}),n=Object(l.a)(t,2),a=function(e,t){return new Date(e,t,0).getDate()}(n[0],n[1]),r=Array(a).fill(null);return this.setLogSources(e,r),r}},{key:"setLogSources",value:function(e,t){this.hash[e]=t.map(m),localStorage.setItem(b,JSON.stringify(this.hash))}}]),e}());function L(e,t){var n={balance:"00:00"},r=Array(t.length);return t.forEach(function(t,o){var i=t||{date:"".concat(e,"-").concat(d(o+1)),leaveType:a.WORK},c=new g(i,n);r[o]=c,n=c}),r}var k=function(){var e=O.getLogSources(E),t=L(E,e),n=Object(r.useState)(t),a=Object(l.a)(n,2),i=a[0],c=a[1];return o.a.createElement("div",{className:"App"},o.a.createElement(w,{yearMonth:E}),o.a.createElement(y,{yearMonth:E,holidays:A,logs:i,onLogsChange:function(e,t){var n=i.map(m);n[e]=t;var a=L(E,n);c(a),O.setLogSources(E,a)}}))},S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(o.a.createElement(k,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/working-hours",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/working-hours","/service-worker.js");S?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):W(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):W(t,e)})}}()}],[[7,1,2]]]);
//# sourceMappingURL=main.7aef2a5f.chunk.js.map