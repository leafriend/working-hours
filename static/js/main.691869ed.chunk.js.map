{"version":3,"sources":["DailyLog.tsx","MonthlyLog.tsx","Header.tsx","log/types.ts","lib.ts","JsonView.tsx","Footer.tsx","LogEditor.tsx","storage/local.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["DailyLog","props","react_default","a","createElement","className","log","isHoliday","isSunday","isSaturday","isActive","join","replace","trim","onClick","onActivate","date","Date","getDate","leaveType","startedAt","finishedAt","working","overall","target","balance","MonthlyLog","logs","map","key","Header","yearMonth","LeaveType","zerofill","i","concat","toString","convertTimeToMinutes","time","sign","charAt","_abs$split$map","substring","split","str","parseInt","_abs$split$map2","Object","slicedToArray","convertMinutesToTime","minutes","abs","Math","hours","floor","rest","SATURDAY","SUNDAY","Log","balanceHolder","classCallCheck","this","weekday","getDay","createClass","get","FULL","undefined","_this","total","HALF","WORK","overtime","toSource","source","JsonView","sources","value","JSON","stringify","onChange","e","onLogsChange","parse","TABLE","name","TEXT","Footer","viewMode","handleViewModeChange","href","rel","LogEditor","disabled","readOnly","handleChange","partial","objectSpread","onLogChange","type","LOCAL_STORAGE_KEY","LocalLogsSet","hash","json","localStorage","getItem","setItem","entries","forEach","_ref","_ref2","_yearMonth$split$map","_yearMonth$split$map2","lastDate","year","month","lastDateOf","Array","fill","setLogSources","YEAR_MONTH","HOLIDAYS","NOW","TODAY","getFullYear","getMonth","BALANCE_HOLDER","logsSet","convertLogSourcesToLogs","holidays","activeDate","length","refined","indexOf","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","onUpdate","onSuccess","catch","error","ReactDOM","render","_useState","useState","_useState2","setLogs","useEffect","getLogSources","_useState3","_useState4","activeLog","setActiveLog","_useState5","_useState6","setViewMode","handleActivate","find","handleLogsChange","newLogs","activeLogs","filter","Header_Header","MonthlyLog_MonthlyLog","JsonView_JsonView","LogEditor_LogEditor","Footer_Footer","document","getElementById","URL","process","origin","addEventListener","fetch","response","contentType","headers","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.691869ed.chunk.js","sourcesContent":["import React, { ReactElement } from 'react';\n\nimport { Log } from './log/types';\n\nexport interface DailyLogProps {\n  log: Log;\n  onActivate: (activeDate: string) => void,\n}\n\nexport default function DailyLog(props: DailyLogProps): ReactElement {\n  return (\n    <tr\n      className={[\n        props.log.isHoliday ? 'holiday' : (\n          props.log.isSunday ? 'sunday' : (\n            props.log.isSaturday ? 'saturday' : ''\n          )\n        ),\n        props.log.isActive ? 'active' : '',\n      ].join(' ').replace(/ +/g, ' ').trim()}\n      onClick={() => props.onActivate(props.log.date)}\n    >\n      <td className=\"date\">{new Date(props.log.date).getDate()}</td>\n      <td>{props.log.leaveType}</td>\n      <td className=\"time\">{props.log.startedAt || ''}</td>\n      <td className=\"time\">{props.log.finishedAt || ''}</td>\n      <td className=\"time\">{props.log.working || ''}</td>\n      <td className=\"time\">{props.log.overall}</td>\n      <td className=\"time\">{props.log.target}</td>\n      <td className=\"time\">{props.log.balance}</td>\n    </tr>\n  );\n}\n","import React, { ReactElement } from 'react';\n\nimport './MonthlyLog.scss';\nimport DailyLog from './DailyLog';\nimport { Log } from './log/types';\n\nexport interface MonthlyLogProps {\n  logs: Log[];\n  onActivate: (activeDate: string) => void,\n}\n\nexport default function MonthlyLog(props: MonthlyLogProps): ReactElement {\n  return (\n    <table className=\"monthly-logs\">\n      <thead>\n        <tr>\n          <th className=\"date\">D.</th>\n          <th>Leave</th>\n          <th className=\"time\">Start</th>\n          <th className=\"time\">Fin.</th>\n          <th className=\"time\">Work</th>\n          <th className=\"time\">All</th>\n          <th className=\"time\">Target</th>\n          <th className=\"time\">Bal.</th>\n        </tr>\n      </thead>\n      <tbody>\n        {props.logs.map(log => (\n          <DailyLog\n            key={log.date}\n            log={log}\n            onActivate={props.onActivate}\n          />\n        ))}\n      </tbody>\n    </table>\n  );\n};\n","import React, { ReactElement } from 'react';\n\nimport './Header.scss';\n\nexport interface HeaderProps {\n  yearMonth: string;\n}\n\nexport default function Header(props: HeaderProps): ReactElement {\n  return (\n    <header>Working Hours of {props.yearMonth}</header>\n  );\n};\n","import { convertMinutesToTime, convertTimeToMinutes, Nullable } from \"../lib\";\n\nexport enum LeaveType {\n  WORK = 'WORK',\n  HALF = 'HALF',\n  FULL = 'FULL',\n}\n\nexport interface LogSource {\n  readonly date: string;\n  readonly leaveType: LeaveType;\n  readonly startedAt?: string;\n  readonly finishedAt?: string;\n}\n\nexport interface BalanceHolder {\n  readonly overall: string;\n  readonly target: string;\n  readonly balance: string\n}\n\nconst SATURDAY = 6;\nconst SUNDAY = 0;\n\nexport class Log {\n\n  public readonly date: string;\n\n  public readonly leaveType: LeaveType;\n\n  public readonly startedAt?: string;\n\n  public readonly finishedAt?: string;\n\n  public readonly isSaturday: boolean;\n\n  public readonly isSunday: boolean;\n\n  public constructor(\n    log: LogSource,\n    private readonly balanceHolder: BalanceHolder,\n    public readonly isHoliday: boolean,\n    public isActive: boolean,\n  ) {\n    this.date = log.date;\n    this.leaveType = log.leaveType;\n    this.startedAt = log.startedAt;\n    this.finishedAt = log.finishedAt;\n\n    const date = new Date(log.date);\n    const weekday = date.getDay();\n\n    this.isSunday = weekday === SUNDAY;\n    this.isSaturday = weekday === SATURDAY;\n\n  }\n\n  public get overall(): string {\n\n    if (this.leaveType !== LeaveType.FULL && (this.startedAt === undefined || this.finishedAt === undefined)) {\n      return this.balanceHolder.overall;\n    }\n\n    const overall = convertTimeToMinutes(this.balanceHolder.overall);\n    const working = convertTimeToMinutes(this.working!);\n    return convertMinutesToTime(overall + working);\n\n  }\n\n  public get target(): string {\n\n    if (this.isHoliday || this.isSaturday || this.isSunday) {\n      return this.balanceHolder.target;\n    }\n\n    const target = convertTimeToMinutes(this.balanceHolder.target);\n    return convertMinutesToTime(target + 8 * 60);\n\n  }\n\n  public get working(): string | undefined {\n    if (this.leaveType === LeaveType.FULL) {\n      return convertMinutesToTime(9.5 * 60);\n    }\n\n    if (this.startedAt === undefined || this.finishedAt === undefined) {\n      return undefined;\n    }\n\n    const startedAt = convertTimeToMinutes(this.startedAt);\n    const finishedAt = convertTimeToMinutes(this.finishedAt);\n    const total = finishedAt - startedAt;\n\n    const working = (() => {\n      switch (this.leaveType) {\n\n        case LeaveType.HALF:\n          if (total >= 4 * 60) {\n            return 8 * 60;\n          }\n          return 4 * 60 + total;\n\n        case LeaveType.WORK:\n          if (total < (4.5 * 1) * 60) {\n            return total - (30 * (1 - 1));\n\n          } else if (total < (4.5 * 2) * 60) {\n            return total - (30 * (2 - 1));\n\n          } else if (total < (4.5 * 3) * 60) {\n            return total - (30 * (3 - 1));\n\n          } else {\n            return total - 90;\n          }\n      }\n\n    })()\n\n    return convertMinutesToTime(working);\n  }\n\n  public get overtime(): string | undefined {\n    const working = this.working;\n    if (working === undefined) {\n      return undefined;\n    }\n\n    const overMinutes = convertTimeToMinutes(working) - (8 * 60);\n    return convertMinutesToTime(overMinutes);\n  }\n\n  public get balance(): string {\n    const overtime = this.overtime;\n    if (overtime === undefined) {\n      return this.balanceHolder.balance;\n    }\n\n    const balanceMinutes = convertTimeToMinutes(this.balanceHolder.balance);\n    const overtimeMinutes = convertTimeToMinutes(overtime);\n\n    return convertMinutesToTime(balanceMinutes + overtimeMinutes);\n  }\n\n}\n\nexport function toSource(source: Nullable<LogSource>): Nullable<LogSource> {\n  if (source === null) {\n    return null;\n  }\n  const { date, leaveType, startedAt, finishedAt } = source;\n  if (leaveType === LeaveType.WORK && startedAt === undefined && finishedAt === undefined) {\n    return null\n  }\n  return { date, leaveType, startedAt, finishedAt };\n}\n","export type Nullable<T> = T | null;\n\nexport function lastDateOf(year: number, month: number): number {\n  return new Date(year, month, 0).getDate();\n}\n\nexport function zerofill(i: number): string {\n  if (i < 10) {\n    return `0${i}`;\n  } else {\n    return i.toString();\n  }\n}\n\nexport function convertTimeToMinutes(time: string): number {\n  const sign = time.charAt(0) === '-' ? -1 : 1;\n  const abs = sign < 0 ? time.substring(1) : time;\n  const [hours, minutes] = abs.split(':').map(str => parseInt(str, 10));\n  return sign * (hours * 60 + minutes);\n}\n\nexport function convertMinutesToTime(minutes: number): string {\n  const sign = minutes < 0 ? '-' : ''\n  const abs = Math.abs(minutes);\n  const hours = Math.floor(abs / 60);\n  const rest = abs - (hours * 60);\n  return `${sign}${zerofill(hours)}:${zerofill(rest)}`;\n}\n","import React, { ReactElement } from 'react';\n\nimport './JsonView.scss';\nimport { Log, LogSource, toSource } from './log/types';\nimport { Nullable } from './lib';\n\nexport interface JsonViewProps {\n  logs: Log[];\n  onLogsChange: (sources: Nullable<LogSource>[]) => void,\n}\n\nexport default function JsonView(props: JsonViewProps): ReactElement {\n  const sources = props.logs.map(toSource);\n  return (\n    <textarea\n      className=\"json-view\"\n      value={JSON.stringify(sources)}\n      onChange={e => props.onLogsChange(JSON.parse(e.target.value))}\n    />\n  );\n};\n","import React, { ReactElement } from 'react';\n\nimport './Footer.scss';\nimport MonthlyLog from './MonthlyLog';\nimport JsonView from './JsonView';\n\nconst TABLE = MonthlyLog.name;\nconst TEXT = JsonView.name;\n\nexport interface FooterProps {\n  viewMode: string;\n  handleViewModeChange: (viewMode: string) => void\n}\n\nexport default function Footer(props: FooterProps): ReactElement {\n  return (\n    <footer>\n      <select\n        value={props.viewMode}\n        onChange={e => props.handleViewModeChange(e.target.value)}\n      >\n        <option value={TABLE}>Table</option>\n        <option value={TEXT}>Text</option>\n      </select>\n      <a\n        href=\"https://github.com/leafriend/working-hours/\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >Github</a>\n    </footer>\n  );\n};\n","import React, { ReactElement } from 'react';\n\nimport './LogEditor.scss';\n\nimport { Log, LeaveType, LogSource } from './log/types';\n\nexport interface LogEditorProps {\n  log: Log;\n  onLogChange: (source: LogSource) => void,\n}\n\ntype LeaveTypeLog = Pick<Log, 'leaveType'>;\ntype StartedAtLog = Pick<Log, 'startedAt'>;\ntype FinishedAtLog = Pick<Log, 'finishedAt'>;\ntype PartialLog = LeaveTypeLog | StartedAtLog | FinishedAtLog;\n\nexport default function LogEditor(props: LogEditorProps): ReactElement {\n  const log = props.log\n\n  const disabled = log.isHoliday || log.isSunday || log.isSaturday;\n  const readOnly = log.leaveType === LeaveType.FULL;\n\n  function handleChange(partial: PartialLog) {\n    const source = {\n      ...log,\n      ...partial,\n    };\n\n    props.onLogChange(source);\n  }\n\n  return (\n    <div className=\"LogEditor\">\n      <h2>{log.date}</h2>\n      <div className=\"form-group\">\n        <label>\n          Leave Type:\n          <select\n            disabled={disabled}\n            value={log.leaveType}\n            onChange={e => handleChange({ leaveType: e.target.value as LeaveType })}\n          >\n            <option value={LeaveType.WORK}>Work</option>\n            <option value={LeaveType.HALF}>Half</option>\n            <option value={LeaveType.FULL}>Full</option>\n          </select>\n        </label>\n        <label>\n          Started:\n          <input\n            disabled={disabled}\n            readOnly={disabled ? false : readOnly}\n            type=\"time\"\n            value={log.startedAt || ''}\n            onChange={e => handleChange({ startedAt: e.target.value || undefined })}\n          />\n        </label>\n        <label>\n          Finished:\n          <input\n            disabled={disabled}\n            readOnly={disabled ? false : (readOnly || log.startedAt === '')}\n            type=\"time\"\n            value={log.finishedAt || ''}\n            onChange={e => handleChange({ finishedAt: e.target.value || undefined })}\n          />\n        </label>\n      </div>\n    </div>\n  );\n\n}\n","import { lastDateOf, Nullable, zerofill } from \"../lib\";\nimport { LogSource, toSource } from \"../log/types\";\n\nimport { LogsSet } from \"./types\";\n\ninterface Hash {\n  [yearMonth: string]: Nullable<LogSource>[];\n}\n\nconst LOCAL_STORAGE_KEY = 'logsSet';\n\nexport class LocalLogsSet implements LogsSet {\n\n  private readonly hash: Hash = {}\n\n  public constructor() {\n    const json = localStorage.getItem(LOCAL_STORAGE_KEY);\n    if (json === null) {\n      localStorage.setItem(LOCAL_STORAGE_KEY, '{}');\n    } else {\n      this.hash = JSON.parse(json);\n    }\n\n    // TODO Temporary code: previous version format doesn't contain date\n    // -> fill date\n    Object.entries(this.hash).forEach(([key,sources]) => {\n      this.hash[key] = sources.map((source, i) => {\n        if (source && !source.date) {\n          return {\n            date: `${key}-${zerofill(i + 1)}`,\n            ...source,\n          }\n        } else {\n          return source;\n        }\n      });\n    })\n  }\n\n  public getLogSources(yearMonth: string): Nullable<LogSource>[] {\n    if (yearMonth in this.hash) {\n      return this.hash[yearMonth];\n    }\n\n    const [year, month] = yearMonth.split('-').map(str => parseInt(str));\n    const lastDate = lastDateOf(year, month);\n\n    const sources = Array<Nullable<LogSource>>(lastDate).fill(null);\n    this.setLogSources(yearMonth, sources);\n    return sources;\n  }\n\n  public setLogSources(yearMonth: string, sources: Nullable<LogSource>[]): void {\n    this.hash[yearMonth] = sources.map(toSource);\n\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(this.hash));\n  }\n\n}\n","import React, { ReactElement, useState, useEffect } from 'react';\n\nimport './App.scss';\nimport MonthlyLog from './MonthlyLog';\nimport Header from './Header';\nimport JsonView from './JsonView';\nimport Footer from './Footer';\nimport LogEditor from './LogEditor';\nimport { Nullable, zerofill } from './lib';\nimport { Log, LogSource, toSource, BalanceHolder, LeaveType } from './log/types';\nimport { LocalLogsSet } from './storage/local';\nimport { LogsSet } from './storage/types';\n\nconst YEAR_MONTH = '2019-05';\nconst HOLIDAYS = [\n  '2019-05-01',\n  '2019-05-06',\n];\n\nconst NOW = new Date();\nconst TODAY = `${NOW.getFullYear()}-${zerofill(NOW.getMonth() + 1)}-${zerofill(NOW.getDate())}`;\n\nconst BALANCE_HOLDER: BalanceHolder = {\n  overall: '00:00',\n  target: '00:00',\n  balance: '00:00',\n};\n\nconst TABLE = MonthlyLog.name;\nconst TEXT = JsonView.name;\n\nconst logsSet: LogsSet = new LocalLogsSet();\n\nfunction convertLogSourcesToLogs(yearMonth: string, sources: Nullable<LogSource>[], holidays: string[], activeDate: string): Log[] {\n  let balanceHolder: BalanceHolder = BALANCE_HOLDER;\n  const logs = Array(sources.length);\n  sources.forEach((source, i) => {\n    const refined = source ? source : {\n      date: `${yearMonth}-${zerofill(i + 1)}`,\n      leaveType: LeaveType.WORK,\n    };\n\n    const isHoliday = holidays.indexOf(refined.date) >= 0;\n\n    const isActive = activeDate === refined.date;\n\n    const log = new Log(refined, balanceHolder, isHoliday, isActive);\n    logs[i] = log;\n    balanceHolder = log;\n  })\n  return logs;\n}\nfunction loadLogs(yearMonth: string, holidays: string[], activeDate: string): Log[] {\n  const sources = logsSet.getLogSources(yearMonth);\n  const defaultLogs = convertLogSourcesToLogs(yearMonth, sources, holidays, activeDate);\n  return defaultLogs;\n}\n\nexport default function App(): ReactElement {\n  const [logs, setLogs] = useState<Log[]>([]);\n  useEffect(() => {\n    setLogs(loadLogs(YEAR_MONTH, HOLIDAYS, TODAY));\n  }, []);\n\n  const [activeLog, setActiveLog] = useState<Log>(\n    new Log({ date: TODAY, leaveType: LeaveType.WORK }, BALANCE_HOLDER, false, true)\n  );\n\n  const [viewMode, setViewMode] = useState(TABLE);\n\n  function handleActivate(activeDate: string): void {\n    logs.forEach(log => log.isActive = log.date === activeDate);\n    setLogs(logs);\n\n    const activeLog = logs.find(log => log.isActive);\n    activeLog && setActiveLog(activeLog);\n  }\n\n  function handleLogsChange(sources: Nullable<LogSource>[]) {\n    const newLogs = convertLogSourcesToLogs(YEAR_MONTH, sources, HOLIDAYS, activeLog.date);\n    setLogs(newLogs);\n    const activeLogs = logs.filter(log => log.isActive);\n    if (activeLogs.length > 0) {\n      setActiveLog(activeLogs[0]);\n    }\n    logsSet.setLogSources(YEAR_MONTH, newLogs);\n  }\n\n  function handleLogChange(source: LogSource) {\n    const date = parseInt(source.date.substring(8), 10);\n    const sources = logs.map(toSource)\n      .map((log, i) =>\n        log === null\n          ? (i + 1 === date ? source : log)\n          : (log.date === source.date ? source : log)\n      );\n    const newLogs = convertLogSourcesToLogs(YEAR_MONTH, sources, HOLIDAYS, source.date);\n    setLogs(newLogs);\n    const activeLogs = newLogs.filter(log => log.isActive);\n    if (activeLogs.length > 0) {\n      setActiveLog(activeLogs[0]);\n    }\n    logsSet.setLogSources(YEAR_MONTH, newLogs);\n  }\n\n  return (\n    <div className=\"App\">\n      <Header\n        yearMonth={YEAR_MONTH}\n      />\n      <article>\n        <div>\n          {(() => {\n            switch (viewMode) {\n              case TABLE:\n                return (\n                  <MonthlyLog\n                    logs={logs}\n                    onActivate={handleActivate}\n                  />\n                );\n              case TEXT:\n                return (\n                  <JsonView\n                    logs={logs}\n                    onLogsChange={handleLogsChange}\n                  />\n                );\n              default:\n                return null;\n            }\n\n          })()}\n        </div>\n        <div>\n          <LogEditor\n            log={activeLog}\n            onLogChange={handleLogChange}\n          />\n        </div>\n      </article>\n      <Footer\n        viewMode={viewMode}\n        handleViewModeChange={viewMode => setViewMode(viewMode)}\n      />\n    </div>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}