(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a(20)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),o=a.n(i),l=(a(13),a(1));a(14),a(15);function c(e){return r.a.createElement("tr",{className:[e.log.isHoliday?"holiday":e.log.isSunday?"sunday":e.log.isSaturday?"saturday":"",e.log.isActive?"active":""].join(" ").replace(/ +/g," ").trim(),onClick:function(){return e.onActivate(e.log.date)}},r.a.createElement("td",{className:"date"},new Date(e.log.date).getDate()),r.a.createElement("td",null,e.log.leaveType),r.a.createElement("td",{className:"time"},e.log.startedAt||"--:--"),r.a.createElement("td",{className:"time"},e.log.finishedAt||"--:--"),r.a.createElement("td",{className:"time"},e.log.working||"--:--"),r.a.createElement("td",{className:"time"},e.log.overall),r.a.createElement("td",{className:"time"},e.log.target),r.a.createElement("td",{className:"time"},e.log.balance))}function s(e){return r.a.createElement("table",{className:"monthly-logs"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"date"},"D."),r.a.createElement("th",null,"Leave"),r.a.createElement("th",{className:"time"},"Start"),r.a.createElement("th",{className:"time"},"Fin."),r.a.createElement("th",{className:"time"},"Work"),r.a.createElement("th",{className:"time"},"All"),r.a.createElement("th",{className:"time"},"Target"),r.a.createElement("th",{className:"time"},"Bal."))),r.a.createElement("tbody",null,e.logs.map(function(t){return r.a.createElement(c,{key:t.date,log:t,onActivate:e.onActivate})})))}a(16);function u(e){return r.a.createElement("header",null,"Working Hours of ",e.yearMonth)}a(17);var d,h=a(2),v=a(3);function f(e){return e<10?"0".concat(e):e.toString()}function g(e){var t="-"===e.charAt(0)?-1:1,a=(t<0?e.substring(1):e).split(":").map(function(e){return parseInt(e,10)}),n=Object(l.a)(a,2);return t*(60*n[0]+n[1])}function m(e){var t=e<0?"-":"",a=Math.abs(e),n=Math.floor(a/60),r=a-60*n;return"".concat(t).concat(f(n),":").concat(f(r))}!function(e){e.WORK="WORK",e.HALF="HALF",e.FULL="FULL"}(d||(d={}));var p=6,y=0,E=function(){function e(t,a,n,r){Object(h.a)(this,e),this.balanceHolder=a,this.isHoliday=n,this.isActive=r,this.date=void 0,this.leaveType=void 0,this.startedAt=void 0,this.finishedAt=void 0,this.isSaturday=void 0,this.isSunday=void 0,this.date=t.date,this.leaveType=t.leaveType,this.startedAt=t.startedAt,this.finishedAt=t.finishedAt;var i=new Date(t.date).getDay();this.isSunday=i===y,this.isSaturday=i===p}return Object(v.a)(e,[{key:"overall",get:function(){return this.leaveType===d.FULL||void 0!==this.startedAt&&void 0!==this.finishedAt?m(g(this.balanceHolder.overall)+g(this.working)):this.balanceHolder.overall}},{key:"target",get:function(){return this.isHoliday||this.isSaturday||this.isSunday?this.balanceHolder.target:m(g(this.balanceHolder.target)+480)}},{key:"working",get:function(){var e=this;if(this.leaveType===d.FULL)return m(570);if(void 0!==this.startedAt&&void 0!==this.finishedAt){var t=g(this.startedAt),a=g(this.finishedAt)-t;return m(function(){switch(e.leaveType){case d.HALF:return a>=240?480:240+a;case d.WORK:return a<270?a-0:a<540?a-30:a<810?a-60:a-90}}())}}},{key:"overtime",get:function(){var e=this.working;if(void 0!==e)return m(g(e)-480)}},{key:"balance",get:function(){var e=this.overtime;return void 0===e?this.balanceHolder.balance:m(g(this.balanceHolder.balance)+g(e))}}]),e}();function b(e){if(null===e)return null;var t=e.date,a=e.leaveType,n=e.startedAt,r=e.finishedAt;return a===d.WORK&&void 0===n&&void 0===r?null:{date:t,leaveType:a,startedAt:n,finishedAt:r}}function w(e){var t=e.logs.map(b);return r.a.createElement("textarea",{className:"json-view",value:JSON.stringify(t),onChange:function(t){return e.onLogsChange(JSON.parse(t.target.value))}})}a(18);var A=s.name,S=w.name;function O(e){return r.a.createElement("footer",null,r.a.createElement("select",{value:e.viewMode,onChange:function(t){return e.handleViewModeChange(t.target.value)}},r.a.createElement("option",{value:A},"Table"),r.a.createElement("option",{value:S},"Text")),"|",r.a.createElement("a",{href:"https://github.com/leafriend/working-hours/",target:"_blank",rel:"noopener noreferrer"},"Github"))}var L=a(4);a(19);function k(e){var t=e.log,a=t.isHoliday||t.isSunday||t.isSaturday,n=t.leaveType===d.FULL;function i(a){var n=Object(L.a)({},t,a);e.onLogChange(n)}return r.a.createElement("div",{className:"LogEditor"},r.a.createElement("h2",null,t.date),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Leave Type:",r.a.createElement("select",{disabled:a,value:t.leaveType,onChange:function(e){return i({leaveType:e.target.value})}},r.a.createElement("option",{value:d.WORK},"Work"),r.a.createElement("option",{value:d.HALF},"Half"),r.a.createElement("option",{value:d.FULL},"Full"))),r.a.createElement("label",null,"Started:",r.a.createElement("input",{disabled:a,readOnly:!a&&n,type:"time",value:t.startedAt||"",onChange:function(e){return i({startedAt:e.target.value||void 0})}})),r.a.createElement("label",null,"Finished:",r.a.createElement("input",{disabled:a,readOnly:!a&&(n||""===t.startedAt),type:"time",value:t.finishedAt||"",onChange:function(e){return i({finishedAt:e.target.value||void 0})}}))))}var N="logsSet",j=function(){function e(){var t=this;Object(h.a)(this,e),this.hash={};var a=localStorage.getItem(N);null===a?localStorage.setItem(N,"{}"):this.hash=JSON.parse(a),Object.entries(this.hash).forEach(function(e){var a=Object(l.a)(e,2),n=a[0],r=a[1];t.hash[n]=r.map(function(e,t){return e&&!e.date?Object(L.a)({date:"".concat(n,"-").concat(f(t+1))},e):e})})}return Object(v.a)(e,[{key:"getLogSources",value:function(e){if(e in this.hash)return this.hash[e];var t=e.split("-").map(function(e){return parseInt(e)}),a=Object(l.a)(t,2),n=function(e,t){return new Date(e,t,0).getDate()}(a[0],a[1]),r=Array(n).fill(null);return this.setLogSources(e,r),r}},{key:"setLogSources",value:function(e,t){this.hash[e]=t.map(b),localStorage.setItem(N,JSON.stringify(this.hash))}}]),e}(),T="2019-05",H=["2019-05-01","2019-05-06"],W=new Date,C="".concat(W.getFullYear(),"-").concat(f(W.getMonth()+1),"-").concat(f(W.getDate())),F={overall:"00:00",target:"00:00",balance:"00:00"},R=s.name,D=w.name,M=new j;function U(e,t,a,n){var r=F,i=Array(t.length);return t.forEach(function(t,o){var l=t||{date:"".concat(e,"-").concat(f(o+1)),leaveType:d.WORK},c=a.indexOf(l.date)>=0,s=n===l.date,u=new E(l,r,c,s);i[o]=u,r=u}),i}var I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],i=t[1];Object(n.useEffect)(function(){var e,t,a;i((t=H,a=C,U(e=T,M.getLogSources(e),t,a)))},[]);var o=Object(n.useState)(new E({date:C,leaveType:d.WORK},F,!1,!0)),c=Object(l.a)(o,2),h=c[0],v=c[1],f=Object(n.useState)(R),g=Object(l.a)(f,2),m=g[0],p=g[1];function y(e){a.forEach(function(t){return t.isActive=t.date===e}),i(a);var t=a.find(function(e){return e.isActive});t&&v(t)}function A(e){var t=U(T,e,H,h.date);i(t);var n=a.filter(function(e){return e.isActive});n.length>0&&v(n[0]),M.setLogSources(T,t)}return r.a.createElement("div",{className:"App"},r.a.createElement(u,{yearMonth:T}),r.a.createElement("article",null,r.a.createElement("div",null,function(){switch(m){case R:return r.a.createElement(s,{logs:a,onActivate:y});case D:return r.a.createElement(w,{logs:a,onLogsChange:A});default:return null}}()),r.a.createElement("div",null,r.a.createElement(k,{log:h,onLogChange:function(e){var t=parseInt(e.date.substring(8),10),n=a.map(b).map(function(a,n){return null===a?n+1===t?e:a:a.date===e.date?e:a}),r=U(T,n,H,e.date);i(r);var o=r.filter(function(e){return e.isActive});o.length>0&&v(o[0]),M.setLogSources(T,r)}}))),r.a.createElement(O,{viewMode:m,handleViewModeChange:function(e){return p(e)}}))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/working-hours",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/working-hours","/service-worker.js");I?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):K(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):K(t,e)})}}()}],[[7,1,2]]]);
//# sourceMappingURL=main.8ab13faa.chunk.js.map