(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(21)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),o=a.n(i),l=(a(14),a(1));a(15),a(16);function c(e){return r.a.createElement("tr",{id:"log-".concat(e.log.date),className:[e.log.isHoliday?"holiday":e.log.isSunday?"sunday":e.log.isSaturday?"saturday":"",e.log.isActive?"active":""].join(" ").replace(/ +/g," ").trim(),onClick:function(){return e.onActivate(e.log.date)}},r.a.createElement("td",{className:"date"},new Date(e.log.date).getDate()),r.a.createElement("td",null,e.log.leaveType),r.a.createElement("td",{className:"time"},e.log.startedAt||""),r.a.createElement("td",{className:"time"},e.log.finishedAt||""),r.a.createElement("td",{className:"time"},e.log.working||""),r.a.createElement("td",{className:"time"},e.log.overall),r.a.createElement("td",{className:"time"},e.log.target),r.a.createElement("td",{className:"time"},e.log.balance))}function s(e){return Object(n.useEffect)(function(){e.logs.forEach(function(t){t.isActive&&e.onActivate(t.date)})}),r.a.createElement("table",{className:"monthly-logs"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"date"},"D."),r.a.createElement("th",null,"Leave"),r.a.createElement("th",{className:"time"},"Start"),r.a.createElement("th",{className:"time"},"Fin."),r.a.createElement("th",{className:"time"},"Work"),r.a.createElement("th",{className:"time"},"All"),r.a.createElement("th",{className:"time"},"Target"),r.a.createElement("th",{className:"time"},"Bal."))),r.a.createElement("tbody",null,e.logs.map(function(t){return r.a.createElement(c,{key:t.date,log:t,onActivate:e.onActivate})})))}a(17);function u(e){return r.a.createElement("header",null,"Working Hours of ",e.yearMonth)}var d,h=a(7),v=a.n(h),f=(a(18),a(2)),g=a(3);function m(e){return e<10?"0".concat(e):e.toString()}function p(e){var t="-"===e.charAt(0)?-1:1,a=(t<0?e.substring(1):e).split(":").map(function(e){return parseInt(e,10)}),n=Object(l.a)(a,2);return t*(60*n[0]+n[1])}function E(e){var t=e<0?"-":"",a=Math.abs(e),n=Math.floor(a/60),r=a-60*n;return"".concat(t).concat(m(n),":").concat(m(r))}!function(e){e.WORK="WORK",e.HALF="HALF",e.FULL="FULL"}(d||(d={}));var y=6,b=0,w=function(){function e(t,a,n,r){Object(f.a)(this,e),this.balanceHolder=a,this.isHoliday=n,this.isActive=r,this.date=void 0,this.leaveType=void 0,this.startedAt=void 0,this.finishedAt=void 0,this.isSaturday=void 0,this.isSunday=void 0,this.date=t.date,this.leaveType=t.leaveType,this.startedAt=t.startedAt,this.finishedAt=t.finishedAt;var i=new Date(t.date).getDay();this.isSunday=i===b,this.isSaturday=i===y}return Object(g.a)(e,[{key:"overall",get:function(){return this.leaveType===d.FULL||void 0!==this.startedAt&&void 0!==this.finishedAt?E(p(this.balanceHolder.overall)+p(this.working)):this.balanceHolder.overall}},{key:"target",get:function(){return this.isHoliday||this.isSaturday||this.isSunday?this.balanceHolder.target:E(p(this.balanceHolder.target)+480)}},{key:"working",get:function(){var e=this;if(this.leaveType===d.FULL)return E(570);if(void 0!==this.startedAt&&void 0!==this.finishedAt){var t=p(this.startedAt),a=p(this.finishedAt)-t;return E(function(){switch(e.leaveType){case d.HALF:return a>=240?480:240+a;case d.WORK:return a<270?a-0:a<540?a-30:a<810?a-60:a-90}}())}}},{key:"overtime",get:function(){var e=this.working;if(void 0!==e)return E(p(e)-480)}},{key:"balance",get:function(){var e=this.overtime;return void 0===e?this.balanceHolder.balance:E(p(this.balanceHolder.balance)+p(e))}}]),e}();function A(e){if(null===e)return null;var t=e.date,a=e.leaveType,n=e.startedAt,r=e.finishedAt;return a===d.WORK&&void 0===n&&void 0===r?null:{date:t,leaveType:a,startedAt:n,finishedAt:r}}function O(e){var t=e.logs.map(A);return r.a.createElement("textarea",{className:"json-view",value:v()(t).replace(/\t/g,"  "),onChange:function(t){return e.onLogsChange(JSON.parse(t.target.value))}})}a(19);var S=s.name,L=O.name;function k(e){return r.a.createElement("footer",null,r.a.createElement("select",{value:e.viewMode,onChange:function(t){return e.handleViewModeChange(t.target.value)}},r.a.createElement("option",{value:S},"Table"),r.a.createElement("option",{value:L},"Text")),r.a.createElement("a",{href:"https://github.com/leafriend/working-hours/",target:"_blank",rel:"noopener noreferrer"},"Github"))}var N=a(4);a(20);function j(e){var t=e.log,a=t.isHoliday||t.isSunday||t.isSaturday,n=t.leaveType===d.FULL;function i(a){var n=Object(N.a)({},t,a);e.onLogChange(n)}return r.a.createElement("div",{className:"LogEditor"},r.a.createElement("h2",null,t.date),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Leave Type:",r.a.createElement("select",{disabled:a,value:t.leaveType,onChange:function(e){return i({leaveType:e.target.value})}},r.a.createElement("option",{value:d.WORK},"Work"),r.a.createElement("option",{value:d.HALF},"Half"),r.a.createElement("option",{value:d.FULL},"Full"))),r.a.createElement("label",null,"Started:",r.a.createElement("input",{disabled:a,readOnly:!a&&n,type:"time",value:t.startedAt||"",onChange:function(e){return i({startedAt:e.target.value||void 0})}})),r.a.createElement("label",null,"Finished:",r.a.createElement("input",{disabled:a,readOnly:!a&&(n||""===t.startedAt),type:"time",value:t.finishedAt||"",onChange:function(e){return i({finishedAt:e.target.value||void 0})}}))))}var T="logsSet",H=function(){function e(){var t=this;Object(f.a)(this,e),this.hash={};var a=localStorage.getItem(T);null===a?localStorage.setItem(T,"{}"):this.hash=JSON.parse(a),Object.entries(this.hash).forEach(function(e){var a=Object(l.a)(e,2),n=a[0],r=a[1];t.hash[n]=r.map(function(e,t){return e&&!e.date?Object(N.a)({date:"".concat(n,"-").concat(m(t+1))},e):e})})}return Object(g.a)(e,[{key:"getLogSources",value:function(e){if(e in this.hash)return this.hash[e];var t=e.split("-").map(function(e){return parseInt(e)}),a=Object(l.a)(t,2),n=function(e,t){return new Date(e,t,0).getDate()}(a[0],a[1]),r=Array(n).fill(null);return this.setLogSources(e,r),r}},{key:"setLogSources",value:function(e,t){this.hash[e]=t.map(A),localStorage.setItem(T,JSON.stringify(this.hash))}}]),e}(),W="2019-05",C=["2019-05-01","2019-05-06"],F=new Date,R="".concat(F.getFullYear(),"-").concat(m(F.getMonth()+1),"-").concat(m(F.getDate())),D={overall:"00:00",target:"00:00",balance:"00:00"},I=s.name,M=O.name,U=new H;function K(e,t,a,n){var r=D,i=Array(t.length);return t.forEach(function(t,o){var l=t||{date:"".concat(e,"-").concat(m(o+1)),leaveType:d.WORK},c=a.indexOf(l.date)>=0,s=n===l.date,u=new w(l,r,c,s);i[o]=u,r=u}),i}var x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],i=t[1];Object(n.useEffect)(function(){var e,t,a;i((t=C,a=R,K(e=W,U.getLogSources(e),t,a)))},[]);var o=Object(n.useState)(new w({date:R,leaveType:d.WORK},D,!1,!0)),c=Object(l.a)(o,2),h=c[0],v=c[1],f=Object(n.useState)(I),g=Object(l.a)(f,2),m=g[0],p=g[1],E=Object(n.useState)(!1),y=Object(l.a)(E,2),b=y[0],S=y[1];function L(e){if(a.forEach(function(t){return t.isActive=t.date===e}),i(a),!b){var t=document.getElementById("content-container"),n=document.getElementById("log-".concat(e));t&&n&&(S(!0),t.scrollTo({top:n.offsetTop}))}var r=a.find(function(e){return e.isActive});r&&v(r)}function N(e){var t=K(W,e,C,h.date);i(t);var n=a.filter(function(e){return e.isActive});n.length>0&&v(n[0]),U.setLogSources(W,t)}function T(e){var t=parseInt(e.date.substring(8),10),n=a.map(A).map(function(a,n){return null===a?n+1===t?e:a:a.date===e.date?e:a}),r=K(W,n,C,e.date);i(r);var o=r.filter(function(e){return e.isActive});o.length>0&&v(o[0]),U.setLogSources(W,r)}return r.a.createElement("div",{className:"App"},r.a.createElement(u,{yearMonth:W}),r.a.createElement("article",null,function(){switch(m){case I:return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"content-container"},r.a.createElement(s,{logs:a,onActivate:L})),r.a.createElement("div",null,r.a.createElement(j,{log:h,onLogChange:T})));case M:return r.a.createElement(O,{logs:a,onLogsChange:N});default:return null}}()),r.a.createElement(k,{viewMode:m,handleViewModeChange:function(e){return p(e)}}))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/working-hours",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/working-hours","/service-worker.js");x?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):B(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):B(t,e)})}}()}],[[8,1,2]]]);
//# sourceMappingURL=main.611d805f.chunk.js.map